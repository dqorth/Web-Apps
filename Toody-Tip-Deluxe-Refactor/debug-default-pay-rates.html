<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Default Pay Rates UI</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-section { margin: 20px 0; padding: 15px; border: 2px solid #ddd; border-radius: 8px; }
        button { padding: 10px 15px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; background-color: #007bff; color: white; }
        .error { color: red; }
        .success { color: green; }
        .info { color: blue; }
        pre { background-color: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Debug Default Pay Rates UI</h1>
    
    <div class="debug-section">
        <h3>DOM Element Check</h3>
        <button onclick="checkDOMElements()">Check DOM Elements</button>
        <div id="domResults"></div>
    </div>
    
    <div class="debug-section">
        <h3>State Check</h3>
        <button onclick="checkState()">Check State</button>
        <div id="stateResults"></div>
    </div>
    
    <div class="debug-section">
        <h3>Manual UI Render Test</h3>
        <button onclick="testUIRender()">Test UI Render</button>
        <div id="uiTestResults"></div>
        
        <!-- Test container -->
        <div id="testContainer" style="border: 1px solid #ccc; padding: 10px; margin-top: 10px; min-height: 50px;">
            <p>Test container for rendering pay rates UI:</p>
            <div id="defaultPayRatesContainer" class="default-pay-rates-container" style="border: 1px dashed #999; padding: 10px;">
                <!-- Pay rates should render here -->
            </div>
        </div>
    </div>

    <script type="module">
        // Import what we need
        import { domElements } from './js/domElements.js';
        import * as state from './js/state.js';
        import { renderDefaultPayRatesUI } from './js/ui/ui-default-pay-rates.js';
        
        window.checkDOMElements = function() {
            const resultsDiv = document.getElementById('domResults');
            let results = '';
            
            // Check if defaultPayRatesContainer exists
            const container = document.getElementById('defaultPayRatesContainer');
            results += '<p class="' + (container ? 'success' : 'error') + '">defaultPayRatesContainer element: ' + (container ? 'FOUND' : 'NOT FOUND') + '</p>';
            
            // Check domElements object
            results += '<p class="' + (domElements.defaultPayRatesContainer ? 'success' : 'error') + '">domElements.defaultPayRatesContainer: ' + (domElements.defaultPayRatesContainer ? 'FOUND' : 'NOT FOUND') + '</p>';
            
            // Check save button
            const saveBtn = document.getElementById('saveDefaultPayRatesBtn');
            results += '<p class="' + (saveBtn ? 'success' : 'error') + '">saveDefaultPayRatesBtn: ' + (saveBtn ? 'FOUND' : 'NOT FOUND') + '</p>';
            
            resultsDiv.innerHTML = results;
        };
        
        window.checkState = function() {
            const resultsDiv = document.getElementById('stateResults');
            let results = '';
            
            try {
                const defaultRates = state.getDefaultPayRates();
                results += '<p class="success">Default pay rates loaded:</p>';
                results += '<pre>' + JSON.stringify(defaultRates, null, 2) + '</pre>';
                
                const jobPositions = state.state.jobPositions;
                results += '<p class="success">Job positions:</p>';
                results += '<pre>' + JSON.stringify(jobPositions, null, 2) + '</pre>';
                
            } catch (error) {
                results += '<p class="error">Error loading state: ' + error.message + '</p>';
            }
            
            resultsDiv.innerHTML = results;
        };
        
        window.testUIRender = function() {
            const resultsDiv = document.getElementById('uiTestResults');
            
            try {
                // Call the render function
                renderDefaultPayRatesUI();
                resultsDiv.innerHTML = '<p class="success">renderDefaultPayRatesUI() called successfully. Check test container below.</p>';
            } catch (error) {
                resultsDiv.innerHTML = '<p class="error">Error calling renderDefaultPayRatesUI(): ' + error.message + '</p>';
                console.error('Render error:', error);
            }
        };
        
        // Auto-check on load
        setTimeout(() => {
            window.checkDOMElements();
            window.checkState();
        }, 500);
    </script>
</body>
</html>
